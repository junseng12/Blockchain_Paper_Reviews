# **📌 CH14: 이더리움의 컨센서스 (Consensus)**

이더리움 블록체인은 탈중앙화를 유지하면서도 **네트워크 내 모든 참여자가 합의된 단일 상태를 유지**해야 한다.

이를 해결하는 방식이 **컨센서스(Consensus) 알고리즘**이며, 이더리움에서는 기존의 **Proof of Work(PoW)** 방식에서 **Proof of Stake(PoS)** 방식으로 전환하고자 한다.

---

## **📌 1️⃣ 컨센서스란?**

### **🔹 컨센서스(Consensus)의 개념**

- **컨센서스(합의)란?**
  → **여러 참가자가 분산된 시스템에서 단일한 "진실"에 합의하는 것.**
  → **블록체인은 중앙집권적인 기관 없이 네트워크 참여자가 동일한 상태를 유지하는 게 핵심!**
- **컨센서스 알고리즘 역할**
  - 네트워크에서 **같은 블록체인 기록을 유지**하도록 보장
  - 네트워크의 **공격이나 조작을 방지**하고 신뢰성 확보
  - **탈중앙화와 보안**을 동시에 해결하는 핵심 기술

📌 **비유:**

> 컨센서스 알고리즘은 **"서로 다른 언어를 쓰는 사람들이 하나의 공용어를 정하는 과정"**과 비슷함.
>
> 참여자들이 **동일한 규칙**을 따르지 않으면 네트워크는 분열됨.

---

## **📌 2️⃣ 이더리움의 컨센서스 알고리즘**

이더리움은 현재 **PoW(Proof of Work)** 를 사용하지만, 점진적으로 **PoS(Proof of Stake)** 로 전환하려고 한다.

| **알고리즘**                   | **특징**                                      |
| ------------------------------ | --------------------------------------------- |
| **PoW (작업증명)**             | 연산 작업(채굴)을 통해 블록 생성, 경쟁 기반   |
| **PoS (지분증명)**             | 일정량의 토큰을 스테이킹한 검증자가 블록 생성 |
| **Casper (이더리움 PoS 버전)** | 이더리움 PoS 전환을 위한 프로토콜             |

---

## **📌 3️⃣ PoW (Proof of Work, 작업 증명)**

### **🔹 PoW 개념**

- 컴퓨터의 **연산 능력을 활용해 블록을 생성**하는 방식
- "채굴(Mining)"이라는 과정을 거쳐 **연산 난이도를 해결한 노드가 블록을 추가**
- **가장 긴 체인(최다 연산량이 투입된 체인)이 정당한 체인으로 인정됨**

📌 **비유:**

> 블록체인은 수학 문제를 푸는 시험과 같음.
>
> 가장 먼저 정답을 맞힌 사람이 블록을 추가할 수 있고, 보상을 받음.

### **🔹 PoW의 핵심 요소**

1️⃣ **채굴(Mining)**: 복잡한 연산 문제(해시 퍼즐)를 해결하여 블록을 생성

2️⃣ **연산 난이도(Difficulty)**: 일정 시간마다 난이도를 조정해 블록 생성 속도를 유지

3️⃣ **보상(Reward)**: 블록을 성공적으로 생성한 채굴자는 새로 발행된 ETH와 트랜잭션 수수료를 보상으로 받음

### **🔹 PoW의 문제점**

- **막대한 에너지 소비** (비효율적)
- **ASIC(전문 채굴기)에 의한 중앙화 위험**
- **확장성 문제** (트랜잭션 속도 제한)

📌 **비유:**

> PoW는 "누가 먼저 어려운 문제를 푸느냐" 의 경쟁 게임.
>
> 빠른 컴퓨터(ASIC)를 가진 사람이 유리해서 소수의 큰 채굴자가 독점할 위험이 있음.

---

## **📌 4️⃣ PoS (Proof of Stake, 지분 증명)**

### **🔹 PoS 개념**

- **채굴(연산 작업) 없이 블록을 생성하는 방식**
- 특정 수량의 코인을 예치(스테이킹)한 사용자가 **블록 생성 권한을 가짐**
- **더 많은 코인을 스테이킹할수록 블록을 생성할 확률이 증가**

📌 **비유:**

> PoS는 **"은행 예금 이자 시스템"**과 비슷함.
>
> 더 많은 돈을 예금할수록 이자를 받을 확률이 높아지듯, **더 많은 ETH를 스테이킹할수록 블록 생성 권한이 커짐.**

### **🔹 PoS의 핵심 요소**

1️⃣ **검증자(Validator)**: ETH를 스테이킹한 사용자가 검증자로 참여

2️⃣ **보상(Reward)**: 블록을 생성하면 검증자는 소량의 ETH 보상

3️⃣ **벌칙(Slashing)**: 부정행위를 하면 스테이킹한 ETH가 일부 몰수됨

### **🔹 PoS의 장점**

✅ **전력 소비 감소** (채굴이 필요 없음)

✅ **더 높은 확장성** (빠른 블록 생성 가능)

✅ **탈중앙화 개선** (채굴 장비의 영향력이 줄어듦)

📌 **비유:**

> PoS는 **"은행 이자를 지급하는 방식"**과 같음.
>
> 블록을 생성하는 것은 **채굴이 아니라 예금(스테이킹)된 돈의 양에 따라 결정됨.**

---

## **📌 5️⃣ Casper: 이더리움의 PoS 모델**

### **🔹 Casper란?**

Casper는 이더리움의 PoS 모델이며, 기존 PoS와 차별화된 **"슬래싱(Slashing)"** 개념을 도입했다.

- 검증자가 부정행위를 하면 **스테이킹한 ETH가 몰수**됨.
- PoS에서 보안 강화를 위해 벌칙(Slashing) 기능을 추가한 것이 특징.

### **🔹 Casper의 두 가지 버전**

1️⃣ **Casper FFG (Friendly Finality Gadget)**

- 기존 PoW에 PoS를 병합한 **하이브리드 방식**
- PoW 블록과 PoS 블록을 혼합하여 안정적인 전환을 목표로 함
  2️⃣ **Casper CBC (Correct-by-Construction)**
- 완전한 PoS 방식
- 모든 블록을 검증자가 투표하여 확정

📌 **비유:**

> Casper는 **"은행 예금 + 벌금 시스템"**과 비슷함.
>
> 정직하면 이자를 받지만, 부정행위를 하면 예금(스테이킹한 ETH)이 몰수됨.

---

## **📌 6️⃣ PoW vs PoS 비교**

| **비교 항목**   | **PoW (작업증명)** | **PoS (지분증명)**  |
| --------------- | ------------------ | ------------------- |
| **합의 방식**   | 연산 문제 풀이     | 코인 예치(스테이킹) |
| **보상 방식**   | 채굴 보상          | 검증자 보상         |
| **에너지 소비** | 높음               | 낮음                |
| **보안성**      | ASIC 독점 가능성   | 검증자 슬래싱(벌칙) |
| **확장성**      | 낮음               | 높음                |

📌 **비유:**

> PoW는 "노동을 많이 한 사람이 보상 받는 방식"
>
> PoS는 **"많이 저축한 사람이 보상 받는 방식"**

---

## **📌 7️⃣ 결론: 이더리움의 컨센서스 방향**

📌 **이더리움은 PoW에서 PoS로 전환 중!**

- 현재 **PoW(작업증명) → PoS(지분증명) 전환 작업 진행 중**
- PoW는 **에너지 소비 문제**, PoS는 **검증자의 탈중앙화를 해결**
- **Casper를 통해 PoS를 도입하며 보안을 강화**

✅ **이더리움이 PoS로 전환하면?**

✔️ **더 빠른 트랜잭션 처리 가능**

✔️ **채굴 없이 검증자가 블록 생성**

✔️ **전력 소비 절감 (친환경적)**

✔️ **더 높은 보안성 (슬래싱 벌칙 도입)**

📌 **마무리:**

이제 이더리움은 **PoS로의 전환을 통해 확장성과 보안성을 동시에 개선**하고 있다.

PoS가 완전히 도입되면 **더 효율적이고 탈중앙화된 이더리움 생태계**가 완성될 것이다! 🚀
