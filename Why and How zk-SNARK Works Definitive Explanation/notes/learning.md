# 📘 zk-SNARK 학습 요약 (2025-05-26)

**범위:** Section 3.1 ~ 3.4 (Polynomial Proofs, Homomorphic Encryption, Polynomial Restriction)  
**출처:** [Why and How zk-SNARK Works (arXiv:1906.07221)](https://arxiv.org/abs/1906.07221)

---

## ✅ 핵심 학습 내용

### 1. Polynomial Evaluation (`3.1`)

- 증명자는 다항식 `p(x)`를 알고 있다고 주장
- 목표는 `p(x) = t(x) * h(x)` 구조가 성립함을 증명
- 검증자는 무작위 `r`을 선택해 t(r) 제공 → `p(r) = t(r) * h(r)` 비교
- ⚠️ 단점: `r`을 안다면 증명자가 거짓 p(x)도 만들 수 있음 → 보안 취약

---

### 2. Homomorphic Encryption (`3.3`)

- 암호화 함수: `E(m) = g^m mod p` (g는 공개된 생성자)
- 동형성 성질:
  - 덧셈: `E(a) * E(b) = E(a + b)`
  - 스칼라곱: `E(a)^k = E(k * a)`
- zk-SNARK에서:
  - 검증자가 `E(s^i) = g^{s^i}` 전달 (s는 비공개)
  - 증명자는 계수 `{c0, c1, c2, ...}`에 따라 계산:
    ```
    E(p(s)) = ∏ E(s^i)^ci = g^{p(s)}
    ```
  - s는 몰라도 `g^{p(s)}`는 계산 가능

---

### 3. Polynomial Restriction (`3.4`)

- 목적: 증명자가 검증자가 제공한 `E(s^i)`만 사용했는지 확인
- 방법:
  - 검증자가 `E(s^i)`와 `E(α * s^i)`도 함께 제공 (α는 검증자만 아는 랜덤값)
  - 증명자는:
    - `gp = g^{p(s)}`
    - `gp' = g^{α * p(s)}`
  - 검증자는 다음 확인:
    ```
    gp^α == gp'
    ```
- 이 관계가 성립하면, 증명자가 제공된 값만 사용했음을 확인할 수 있음

---

## 💡 오늘 중점적으로 고민한 질문 & 개념 정리

| 개념                                          | 주요 질문/이슈                                                |
| --------------------------------------------- | ------------------------------------------------------------- |
| g의 역할                                      | g는 공개된 생성자로, 암호화 대상은 지수 m임                   |
| 증명자는 s를 몰라도 어떻게 p(s)를 계산하는가? | 동형암호 성질을 이용해 `g^{s^i}`를 계수와 곱하여 계산         |
| g^{p(s)}는 무슨 의미?                         | 증명자가 `p(x)`를 알고 있음을 암호화된 상태로 표현한 것       |
| 검증자는 g^{p(s)}로 무엇을 아는가?            | 값 자체는 모르고, 그 계산이 정당한 흐름인지만 검증            |
| gh = g^{h(s)}는 어떻게 만드나?                | `p(x) / t(x)` 다항식 나눗셈을 통해 h(x) 추출 후 g^{h(s)} 계산 |

---

## 🗓️ 다음 학습 예고: Section 3.5 - Zero-Knowledge 성질 부여

- δ 랜덤값을 곱해 증명 내용을 은닉
- 관계는 유지하지만 값은 유출되지 않도록 처리
- ZK의 핵심 수학적 구조 도입
