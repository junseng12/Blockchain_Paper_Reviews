# ğŸ“˜ zk-SNARK í•™ìŠµ ìš”ì•½ (2025-05-26)

**ë²”ìœ„:** Section 3.1 ~ 3.4 (Polynomial Proofs, Homomorphic Encryption, Polynomial Restriction)  
**ì¶œì²˜:** [Why and How zk-SNARK Works (arXiv:1906.07221)](https://arxiv.org/abs/1906.07221)

---

## âœ… í•µì‹¬ í•™ìŠµ ë‚´ìš©

### 1. Polynomial Evaluation (`3.1`)

- ì¦ëª…ìëŠ” ë‹¤í•­ì‹ `p(x)`ë¥¼ ì•Œê³  ìˆë‹¤ê³  ì£¼ì¥
- ëª©í‘œëŠ” `p(x) = t(x) * h(x)` êµ¬ì¡°ê°€ ì„±ë¦½í•¨ì„ ì¦ëª…
- ê²€ì¦ìëŠ” ë¬´ì‘ìœ„ `r`ì„ ì„ íƒí•´ t(r) ì œê³µ â†’ `p(r) = t(r) * h(r)` ë¹„êµ
- âš ï¸ ë‹¨ì : `r`ì„ ì•ˆë‹¤ë©´ ì¦ëª…ìê°€ ê±°ì§“ p(x)ë„ ë§Œë“¤ ìˆ˜ ìˆìŒ â†’ ë³´ì•ˆ ì·¨ì•½

---

### 2. Homomorphic Encryption (`3.3`)

- ì•”í˜¸í™” í•¨ìˆ˜: `E(m) = g^m mod p` (gëŠ” ê³µê°œëœ ìƒì„±ì)
- ë™í˜•ì„± ì„±ì§ˆ:
  - ë§ì…ˆ: `E(a) * E(b) = E(a + b)`
  - ìŠ¤ì¹¼ë¼ê³±: `E(a)^k = E(k * a)`
- zk-SNARKì—ì„œ:
  - ê²€ì¦ìê°€ `E(s^i) = g^{s^i}` ì „ë‹¬ (sëŠ” ë¹„ê³µê°œ)
  - ì¦ëª…ìëŠ” ê³„ìˆ˜ `{c0, c1, c2, ...}`ì— ë”°ë¼ ê³„ì‚°:
    ```
    E(p(s)) = âˆ E(s^i)^ci = g^{p(s)}
    ```
  - sëŠ” ëª°ë¼ë„ `g^{p(s)}`ëŠ” ê³„ì‚° ê°€ëŠ¥

---

### 3. Polynomial Restriction (`3.4`)

- ëª©ì : ì¦ëª…ìê°€ ê²€ì¦ìê°€ ì œê³µí•œ `E(s^i)`ë§Œ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸
- ë°©ë²•:
  - ê²€ì¦ìê°€ `E(s^i)`ì™€ `E(Î± * s^i)`ë„ í•¨ê»˜ ì œê³µ (Î±ëŠ” ê²€ì¦ìë§Œ ì•„ëŠ” ëœë¤ê°’)
  - ì¦ëª…ìëŠ”:
    - `gp = g^{p(s)}`
    - `gp' = g^{Î± * p(s)}`
  - ê²€ì¦ìëŠ” ë‹¤ìŒ í™•ì¸:
    ```
    gp^Î± == gp'
    ```
- ì´ ê´€ê³„ê°€ ì„±ë¦½í•˜ë©´, ì¦ëª…ìê°€ ì œê³µëœ ê°’ë§Œ ì‚¬ìš©í–ˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ

---

## ğŸ’¡ ì˜¤ëŠ˜ ì¤‘ì ì ìœ¼ë¡œ ê³ ë¯¼í•œ ì§ˆë¬¸ & ê°œë… ì •ë¦¬

| ê°œë…                                          | ì£¼ìš” ì§ˆë¬¸/ì´ìŠˆ                                                |
| --------------------------------------------- | ------------------------------------------------------------- |
| gì˜ ì—­í•                                       | gëŠ” ê³µê°œëœ ìƒì„±ìë¡œ, ì•”í˜¸í™” ëŒ€ìƒì€ ì§€ìˆ˜ mì„                   |
| ì¦ëª…ìëŠ” së¥¼ ëª°ë¼ë„ ì–´ë–»ê²Œ p(s)ë¥¼ ê³„ì‚°í•˜ëŠ”ê°€? | ë™í˜•ì•”í˜¸ ì„±ì§ˆì„ ì´ìš©í•´ `g^{s^i}`ë¥¼ ê³„ìˆ˜ì™€ ê³±í•˜ì—¬ ê³„ì‚°         |
| g^{p(s)}ëŠ” ë¬´ìŠ¨ ì˜ë¯¸?                         | ì¦ëª…ìê°€ `p(x)`ë¥¼ ì•Œê³  ìˆìŒì„ ì•”í˜¸í™”ëœ ìƒíƒœë¡œ í‘œí˜„í•œ ê²ƒ       |
| ê²€ì¦ìëŠ” g^{p(s)}ë¡œ ë¬´ì—‡ì„ ì•„ëŠ”ê°€?            | ê°’ ìì²´ëŠ” ëª¨ë¥´ê³ , ê·¸ ê³„ì‚°ì´ ì •ë‹¹í•œ íë¦„ì¸ì§€ë§Œ ê²€ì¦            |
| gh = g^{h(s)}ëŠ” ì–´ë–»ê²Œ ë§Œë“œë‚˜?                | `p(x) / t(x)` ë‹¤í•­ì‹ ë‚˜ëˆ—ì…ˆì„ í†µí•´ h(x) ì¶”ì¶œ í›„ g^{h(s)} ê³„ì‚° |

---

# ğŸ“˜ zk-SNARK í•™ìŠµ ìš”ì•½ (2025-06-04)

**ë²”ìœ„:** Section 3.5 \~ 4.6.2 (Zero-Knowledge, Trusted Setup, Multi-Operation, Variable Polynomials)
**ì¶œì²˜:** [Why and How zk-SNARK Works (arXiv:1906.07221)](https://arxiv.org/abs/1906.07221)

---

## âœ… í•µì‹¬ í•™ìŠµ ë‚´ìš©

### 1. Zero-Knowledge ì„±ì§ˆ ë¶€ì—¬ (`3.5`)

- ì¦ëª…ê°’ `g^{p(s)}`ë§Œ ì œê³µí•˜ë©´, ì¦ëª… ë‚´ìš©ì´ ìœ ì¶œë  ìˆ˜ ìˆìŒ
- **ZK ë³´ì¥**ì„ ìœ„í•´ ì¦ëª…ì ì„ì˜ì˜ ëœë¤ê°’ `Î´`ë¥¼ ê³±í•¨
- ì¦ëª…ìëŠ” ë‹¤ìŒì„ ì œì¶œ:

  ```
  g^{Î´Â·p(s)}, g^{Î±Â·Î´Â·p(s)}, g^{Î´Â·h(s)}
  ```

- ê²€ì¦ìëŠ” pairingì„ í†µí•´ ë‹¤ìŒ ì‹ í™•ì¸:

  ```
  e(g^{Î±Â·Î´Â·p(s)}, g) = e(g^{Î´Â·p(s)}, g^Î±)
  e(g^{Î´Â·p(s)}, g) = e(g^{Î´Â·h(s)}, g^{t(s)})
  ```

- â‡’ ì•”í˜¸í™”ëœ ìƒíƒœì—ì„œ ì˜¬ë°”ë¥¸ ì—°ì‚°ì´ ì´ë£¨ì–´ì¡ŒìŒì„ í™•ì¸í•˜ë©°, ì‹¤ì œ p(s)ëŠ” ë…¸ì¶œë˜ì§€ ì•ŠìŒ

---

### 2. CRS & Trusted Setup (`3.6`)

- **CRS (Common Reference String)**: ë¯¸ë¦¬ ê³„ì‚°ëœ `g^{s^i}`, `g^{Î±Â·s^i}` ë“¤ì˜ ì§‘í•©
- ëŒ€í™”í˜• êµ¬ì¡°ë¥¼ ë¹„ëŒ€í™”í˜•ìœ¼ë¡œ ë°”ê¾¸ê¸° ìœ„í•œ í•µì‹¬ ìš”ì†Œ
- `Trusted Setup` ê³¼ì •ì—ì„œ ì¦ëª…ìì™€ ê²€ì¦ìê°€ ê³µí†µì˜ ì°¸ì¡°ê°’ì„ ê°€ì§€ê²Œ í•¨

#### ì£¼ìš” ê°œë… ìš”ì•½:

| í•­ëª©            | ì„¤ëª…                                                  |
| --------------- | ----------------------------------------------------- |
| CRS             | `g^s`, `g^{s^2}` ë“± ê³ ì •ëœ ë‹¤í•­ì‹ í‰ê°€ ì•”í˜¸ë¬¸ ì§‘í•©    |
| Trapdoor        | `s`ë¥¼ ì•Œë©´ ê±°ì§“ ì¦ëª…ë„ ê°€ëŠ¥í•¨ â‡’ ì™¸ë¶€ì— ê³µê°œ ê¸ˆì§€      |
| ë‹¤ìê°„ Ceremony | ì—¬ëŸ¬ ì°¸ê°€ìê°€ `s_i`ë¥¼ ë…ë¦½ì ìœ¼ë¡œ ì„ íƒí•˜ì—¬ ì‹ ë¢°ë„ í™•ë³´ |
| Powers of Tau   | SNARKìš© ë‹¤í•­ì‹ ì•”í˜¸í™”ë¥¼ ìœ„í•œ ì¼ë°˜ì  setup í”„ë¡œí† ì½œ    |

---

### 3. Succinct Non-Interactive Argument (`3.7`)

- zk-SNARKì€ ê²°êµ­ ë‹¤ìŒ ì‹ì˜ ì•”í˜¸í™”ëœ ì¦ëª…ì„ ëª©í‘œë¡œ í•¨:

  ```
  p(x) = l(x) * r(x) - o(x)
  p(x) = t(x) * h(x)
  ```

- ê° ë‹¤í•­ì‹ `l(x), r(x), o(x)`ì— ëŒ€í•´ ë‹¤ìŒ ì•”í˜¸ë¬¸ ìƒì„±:

  ```
  g^{Î´Â·l(s)}, g^{Î´Â·r(s)}, g^{Î´Â·o(s)}
  g^{Î±Â·Î´Â·l(s)}, g^{Î±Â·Î´Â·r(s)}, g^{Î±Â·Î´Â·o(s)}
  ```

- pairing ê¸°ë°˜ ê²€ì¦ì‹ìœ¼ë¡œ ì œì•½ ì¡°ê±´ í™•ì¸

---

## ğŸ§® General-Purpose Proof êµ¬ì¡° (`4.1 ~ 4.4`)

### 4.1 Computation

- íšŒë¡œì˜ ì œì•½ì„ ë‹¤í•­ì‹ìœ¼ë¡œ í‘œí˜„:

  ```
  l(x)Â·r(x) = o(x) + t(x)Â·h(x)
  ```

### 4.2 Single Operation

- ë‹¨ì¼ ì œì•½ì— ëŒ€í•´ ê°ê° ë‹¤í•­ì‹ êµ¬ì„±
- p(x) = l(x)Â·r(x) âˆ’ o(x) í˜•íƒœë¡œ êµ¬ì„± í›„, pairingì„ í†µí•´ ì¦ëª…

### 4.3 Enforcing Operation

- p(x) = t(x)Â·h(x)ì¸ì§€ ê²€ì¦í•´ì•¼ í•¨
- ì•”í˜¸ë¬¸ë§Œìœ¼ë¡œëŠ” ê³±ì…ˆ ë¶ˆê°€ â‡’ pairingìœ¼ë¡œ ì œí•œ ê²€ì¦ ìˆ˜í–‰

### 4.4 Proof of Operation

- ì¦ëª…ìëŠ”:

  ```
  g^{l(s)}, g^{r(s)}, g^{o(s)}, g^{Î±Â·l(s)}, g^{Î±Â·r(s)}, g^{Î±Â·o(s)}
  ```

  ì„ ì œì¶œí•¨

- ê²€ì¦ìëŠ” pairingì„ í†µí•´ ìœ„ ë‹¤í•­ì‹ì˜ ê´€ê³„ì™€ ë™ì¼í•œ s ì‚¬ìš©ì„ í™•ì¸
- ì•ŒíŒŒ ì‹œí”„íŠ¸(`Î±`)ëŠ” ë‹¤í•­ì‹ ìœ„ì¡°ë¥¼ ë§‰ëŠ” ì—­í• 

---

## ğŸ§® Multiple Operations & Variable Polynomials (`4.5 ~ 4.6.2`)

### 4.5.1 Polynomial Interpolation

- ì—¬ëŸ¬ ì—°ì‚°ì„ ë‹¤í•­ì‹ í•˜ë‚˜ë¡œ í†µí•©í•˜ë ¤ë©´ `t(x)`ì˜ **ê·¼**ì´ ê° ì—°ì‚° ìœ„ì¹˜ë¥¼ í¬í•¨í•´ì•¼ í•¨
- ì˜ˆ: ì—°ì‚°ì´ x=1, 2, 3ì—ì„œ ì¼ì–´ë‚¬ë‹¤ë©´:

  ```
  t(x) = (x - 1)(x - 2)(x - 3)
  ```

### 4.5.2 Multi-Operation Polynomials

- í•˜ë‚˜ì˜ ë‹¤í•­ì‹ìœ¼ë¡œ ì—¬ëŸ¬ ì—°ì‚°ì„ í‘œí˜„ ê°€ëŠ¥í•˜ì§€ë§Œ, ë³€ìˆ˜ ê°„ ë…ë¦½ì„±ì„ ì¹¨í•´í•  ìˆ˜ ìˆìŒ
- ë™ì¼í•œ `a`ê°’ì„ ëª¨ë“  ì—°ì‚°ì—ì„œ ë³´ì¥í•˜ë ¤ë©´, ë‹¤í•­ì‹ì˜ \*\*ë¹„ë¡€ì„±(proportion)\*\*ë§Œ ìœ ì§€í•´ì•¼ í•¨

  - ì¦‰, `vÂ·l(x)`ëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ `l(x) + u(x)`ëŠ” ë¶ˆê°€ (pairing ì „ì— ì•”í˜¸í™” ìƒíƒœì—ì„  ê³±ì…ˆ ì•ˆë¨)

### 4.6.1 Single-Variable Operand Polynomial

- `l(x)` ë‹¤í•­ì‹ì´ í•˜ë‚˜ì˜ ë³€ìˆ˜ `a`ë§Œ ë°˜ì˜í•  ë•Œ, x=1,2,3 ëª¨ë‘ ë™ì¼í•œ ê°’ `a`ì—¬ì•¼ í•¨
- í•˜ì§€ë§Œ proverê°€ ê° ìœ„ì¹˜ì—ì„œ ë‹¤ë¥¸ ê°’ì„ ëŒ€ì…í•˜ë©´ ë¶€ì •í™•í•œ ì¦ëª…ì´ ë¨ â‡’ ë§‰ì•„ì•¼ í•¨
- **í•´ê²°ì±…**: `g^{l(s)}`ì™€ `g^{Î±Â·l(s)}`ë¥¼ í•¨ê»˜ ê²€ì¦í•˜ì—¬, í•˜ë‚˜ì˜ l(x)ì— ëŒ€í•´ ì¦ëª…í–ˆìŒì„ ë³´ì¥

### 4.6.2 Multi-Variable Operand Polynomial

- ì„œë¡œ ë‹¤ë¥¸ ë³€ìˆ˜ (a, d ë“±)ë¥¼ ë‹¤ë£° ê²½ìš° `l_a(x)`, `l_d(x)` ë“±ì˜ **ë³€ìˆ˜ ë‹¤í•­ì‹**ì„ ê°œë³„ ì •ì˜
- ì˜ˆ:

  - `l_a(x)`ëŠ” x=1,2ì—ì„œ 1, ë‚˜ë¨¸ì§€ 0
  - `l_d(x)`ëŠ” x=3ì—ì„œ 1, ë‚˜ë¨¸ì§€ 0

- ê°ê°ì˜ ë‹¤í•­ì‹ì— ê°’ ê³±í•˜ê³  í•©ì‚°í•˜ë©´, ë‹¤í•­ì‹ì´ ì „ì²´ ì—°ì‚°ì„ í‘œí˜„í•¨:

  ```
  l(x) = aÂ·l_a(x) + dÂ·l_d(x)
  ```

- ì´ë¡œì¨ ë³€ìˆ˜ë³„ ë…ë¦½ì„±ê³¼ ZK ë³´ì¥ ìœ ì§€

---

## ğŸ’¡ ì˜¤ëŠ˜ ì¤‘ì ì ìœ¼ë¡œ ê³ ë¯¼í•œ ì§ˆë¬¸ & ê°œë… ì •ë¦¬

| ê°œë…                                        | ì§ˆë¬¸/ì´ìŠˆ                                                        |
| ------------------------------------------- | ---------------------------------------------------------------- |
| ì™œ g^{aÂ·b}ëŠ” ê³„ì‚°ì´ ë¶ˆê°€ëŠ¥í•œê°€?             | ì§€ìˆ˜ì˜ ê³±ì€ ì¼ë°˜ì ì¸ ì•”í˜¸í™” ì—°ì‚°ì—ì„œ ë¶ˆê°€ëŠ¥ â†’ pairingìœ¼ë¡œ ìš°íšŒí•¨ |
| ì™œ ì¦ëª…ìëŠ” ë‹¤í•­ì‹ ê³„ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ëŠ”ê°€? | Î± ì‹œí”„íŠ¸ê°€ ì—†ì´ëŠ” ë‹¤í•­ì‹ì˜ ê° í•­ëª©ì„ ë…ë¦½ì ìœ¼ë¡œ ì¡°ì‘ ë¶ˆê°€í•¨      |
| ì™œ ë™ì¼ ë³€ìˆ˜ëŠ” í•˜ë‚˜ì˜ ê°’ì„ ê°€ì ¸ì•¼ í•˜ëŠ”ê°€?   | ë™ì¼ ì…ë ¥ì— ëŒ€í•´ íšŒë¡œ ì „ì²´ê°€ í•˜ë‚˜ì˜ ì¼ê´€ëœ íë¦„ì„ ê°–ê¸° ìœ„í•´ í•„ìš” |
| ì™œ u(x)ë¡œ ê³±í•˜ë©´ ìœ„í—˜í•œê°€?                  | ë‹¤í•­ì‹ ë¹„ìœ¨ì´ ê¹¨ì§€ë©´, ì „ì²´ êµ¬ì¡°ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆì–´ ìœ„ì¡° ìš°ë ¤ ë°œìƒ  |
| ë³€ìˆ˜ ë¶„ë¦¬ì˜ ëª©ì ì€?                         | ë‹¤ìˆ˜ ì—°ì‚°ì„ ë‹¤ë£° ë•Œ, ë³€ìˆ˜ë§ˆë‹¤ ë…ë¦½ì  ì œì•½ì„ ë¶€ì—¬í•˜ê¸° ìœ„í•¨        |

---

## ğŸ§® Constraint System as Polynomials (`4.7`)

### 4.7.1 Constant Coefficients

- QAPì—ì„œ ê° Gate ì—°ì‚°ì„ ë‹¤í•­ì‹ìœ¼ë¡œ í‘œí˜„í•  ë•Œ, ë³€ìˆ˜ë§ˆë‹¤ **ìƒìˆ˜ ê³„ìˆ˜(coefficient)** ê°€ ì •í™•íˆ ì ìš©ë˜ì–´ì•¼ í•¨

- Gateì˜ ìœ„ì¹˜(x=1,2,3,...)ë§ˆë‹¤ coefficientê°€ ë‹¬ë¼ì§€ë¯€ë¡œ, í•´ë‹¹ ìœ„ì¹˜ì—ì„œ ì›í•˜ëŠ” coefficientê°€ ë‚˜ì˜¤ë„ë¡ **Lagrange ë³´ê°„ë²•** ì‚¬ìš©

- Gate iì— ëŒ€í•´:

  ```
  L(x) = Î£ váµ¢ â‹… láµ¢(x)
  ```

  - láµ¢(x)ëŠ” Gate ìœ„ì¹˜ iì—ì„œ 1, ë‚˜ë¨¸ì§€ì—ì„œ 0ì„ ì¶œë ¥

- ìµœì¢… QAP ë‹¤í•­ì‹ ê²€ì¦ êµ¬ì¡°:

  ```
  P(x) = L(x) Ã— R(x) - O(x) â‰¡ 0 mod Z(x)
  ```

- ğŸš© **í•µì‹¬ insight**
  Gateë³„ coefficientëŠ” ê³ ì • êµ¬ì¡°ë¡œ êµ¬ì„±ë¨ â†’ ProverëŠ” Witness ê°’ë§Œ ë„£ìœ¼ë©´ ë¨ (coefficient êµ¬ì„±ì€ ê³ ì •)

### 4.7.2 Addition for Free

- ë§ì…ˆ(Addition)ì€ Multiplicationì²˜ëŸ¼ Gate ë¹„ìš©ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  **ê³µì§œ(free)** ë¡œ ì²˜ë¦¬ ê°€ëŠ¥

- ë§ì…ˆì„ ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„:

  ```
  (Î£ cLáµ¢ â‹… váµ¢) Ã— 1 = (Î£ cOáµ¢ â‹… váµ¢)
  ```

- ì¦‰, R(x)ëŠ” í•­ìƒ 1ë¡œ ì„¤ì •í•˜ì—¬ Multiplication ì—†ì´ ì²˜ë¦¬

- L(x), O(x)ëŠ” ë§ì…ˆì— í•„ìš”í•œ coefficientë§Œ ì •í™•íˆ êµ¬ì„±

- ğŸš© **í•µì‹¬ insight**
  ë§ì…ˆì€ QAPì—ì„œ R(x)=1ë¡œ ì²˜ë¦¬ ê°€ëŠ¥ â†’ íš¨ìœ¨ì ì¸ íšŒë¡œ ì„¤ê³„ ê°€ëŠ¥

### 4.7.3 Addition, Subtraction and Division

- **ë§ì…ˆ(Addition)** ì€ 4.7.2ì²˜ëŸ¼ freeë¡œ ì²˜ë¦¬ ê°€ëŠ¥

- **ëº„ì…ˆ(Subtraction)** ì€ Additionê³¼ ë™ì¼ êµ¬ì¡°ì—ì„œ coefficientì— **ìŒìˆ˜(-)** ë¥¼ ì ìš©í•˜ë©´ ë¨

  ```
  (Î£ cLáµ¢ â‹… váµ¢) Ã— 1 = (Î£ cOáµ¢ â‹… váµ¢), with negative cLáµ¢ or cOáµ¢
  ```

- **ë‚˜ëˆ—ì…ˆ(Division)** ì€ ìƒìˆ˜ì— ëŒ€í•œ ë‚˜ëˆ—ì…ˆì¼ ê²½ìš° **ê³±ì…ˆì˜ ì—­ìˆ˜(1/d)** ë¡œ ì²˜ë¦¬ ê°€ëŠ¥

  ```
  Division by d â†’ Multiplication by (1/d)
  ```

- ëª¨ë“  ì—°ì‚°ì€ (Î£ cLáµ¢ â‹… váµ¢) Ã— (Î£ cRáµ¢ â‹… váµ¢) = (Î£ cOáµ¢ â‹… váµ¢) í˜•íƒœë¡œ ì¼ê´€ë˜ê²Œ êµ¬ì„± ê°€ëŠ¥

- ğŸš© **í•µì‹¬ insight**
  Addition/Subtraction/Division ëª¨ë‘ QAP êµ¬ì¡°ì— ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨ ê°€ëŠ¥ â†’ ë‹¤ì–‘í•œ ì‚°ìˆ  ì—°ì‚° ì§€ì› ê°€ëŠ¥

---

ì™„ë²½í•´ â€”
ê·¸ëŸ¼ ì•„ê¹Œ ë„¤ê°€ ì£¼ì‹  íŒ¨í„´ ê·¸ëŒ€ë¡œ ìœ ì§€í•´ì„œ
**4.8 ì „ì²´ (4.8 full ë‚´ìš© + ë„¤ê°€ ì§ˆë¬¸í•œ íë¦„ ë°˜ì˜)** ë™ì¼ í¬ë§·ìœ¼ë¡œ ê¹”ë”í•˜ê²Œ ì •ë¦¬í•´ì¤„ê²Œ.

---

## ğŸ§® Multiple Operations (`4.8`)

### 4.8 Multiple Operations

- ìš°ë¦¬ê°€ QAPì—ì„œ í”„ë¡œê·¸ë¨ì„ ì¦ëª…í•  ë•Œ, íŠ¹ì •í•œ **ì…ë ¥ê°’**ì„ ì„¤ì •í•˜ê³  ê·¸ì— ë”°ë¥¸ **ì¤‘ê°„ ë³€ìˆ˜ ê°’**ì„ ê³„ì‚°í•˜ì—¬ Witness vectorë¥¼ êµ¬ì„±í•´ì•¼ í•¨

- ë…¼ë¬¸ ì˜ˆì œì—ì„œëŠ”:

  ```
  ì…ë ¥ê°’: w = 1, a = 3, b = 2
  ì¤‘ê°„ ë³€ìˆ˜: m = a Ã— b = 6
              v = w(m âˆ’ a âˆ’ b) + a + b = 6
  ```

- Witness vectorëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë¨:

  ```
  v = [1, w, a, b, m, v]
  ```

- ì´í›„, ì´ Witness vectorì˜ ê°’ë“¤ì„ L(x), R(x), O(x) êµ¬ì„± ì‹œ coefficientë¡œ ì‚¬ìš©í•¨

- Gateë³„ë¡œ ì—°ì‚° constraintëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ QAPì— í¬í•¨ë¨:

  ```
  (Î£ cLáµ¢ â‹… váµ¢) Ã— (Î£ cRáµ¢ â‹… váµ¢) = (Î£ cOáµ¢ â‹… váµ¢)
  ```

- Lagrange ë³´ê°„ë²•ì„ í†µí•´ Gate ìœ„ì¹˜ë³„ë¡œ L(x), R(x), O(x)ë¥¼ êµ¬ì„±

- ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì :

  - **ì…ë ¥ê°’ì€ Proverê°€ ì„ì˜ë¡œ ì„¤ì • ê°€ëŠ¥** (w, a, bëŠ” ì›í•˜ëŠ” ê°’ ì‚¬ìš© ê°€ëŠ¥)
  - **ì¤‘ê°„ ë³€ìˆ˜ëŠ” í”„ë¡œê·¸ë¨ ë¡œì§ì— ë”°ë¼ ê²°ì •ë¨** (m, vëŠ” Gate ì—°ì‚° ê²°ê³¼ë¡œ ê³ ì •ë¨)

- ProverëŠ” L(x), R(x), O(x) êµ¬ì¡°ë§Œ ê³ ì •ëœ ìƒíƒœì—ì„œ Witness ê°’ë§Œ ì •í™•íˆ ë„£ì–´ì£¼ë©´ ë¨

- ê²°ê³¼ì ìœ¼ë¡œ, ì…ë ¥ê°’ì´ë‚˜ ì¤‘ê°„ ë³€ìˆ˜ ê°’ì´ ë¬´ì—‡ì´ë“  QAP constraintê°€ ë§Œì¡±ë˜ë©´ ì¦ëª… ì„±ê³µ

- ğŸš© **í•µì‹¬ insight**
  L(x), R(x), O(x)ëŠ” Gate êµ¬ì¡°ë¡œ ê³ ì •ë¨ â†’ ProverëŠ” Witness ê°’ë§Œ ì •í™•íˆ ë„£ìœ¼ë©´ ë¨
  ì…ë ¥ê°’ì€ ììœ ë¡­ê²Œ ì„¤ì • ê°€ëŠ¥ (ê³µê°œ/ë¹„ê³µê°œ inputìœ¼ë¡œ êµ¬ë¶„ ê°€ëŠ¥)
  ì¤‘ê°„ ë³€ìˆ˜ëŠ” í”„ë¡œê·¸ë¨ íë¦„ì— ì˜í•´ ê³ ì • ê³„ì‚°ë¨ â†’ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¦ëª… ì§„í–‰

## ğŸ”’ **Î² Shift & Non-Malleability (`4.9`)**

### 4.9.1 Single Î²

- **êµ¬ì¡°**
  $e(g^{v_l}g^{v_r}g^{v_o}, g^{Î²}) = e(g^{v_Î²}, g^{Î²(l+r+o)})$
- **í•œê³„**
  ë™ì¼ Î² â†’ ìˆ˜í•™ì  â€œìš°íšŒâ€ ê°€ëŠ¥ â‡’ ì¦ëª…ìê°€ $v_l,v_r,v_o$ë¥¼ ì¡°ì‘í•´ë„ í†µê³¼ ê°€ëŠ¥
- ğŸš© **í•µì‹¬ Insight**
  í•˜ë‚˜ì˜ Î² ë§Œìœ¼ë¡  **ìœ„ì¹˜ë³„ ê°’ ì¼ê´€ì„±**ì„ ê°•ì œí•˜ì§€ ëª»í•¨

### 4.9.2 Random Î²â‚—, Î²áµ£, Î²â‚’

- **êµ¬ì¡°**
  $e(g^{v_l},g^{Î²_l})\,e(g^{v_r},g^{Î²_r})\,e(g^{v_o},g^{Î²_o}) = e(g^{v_Î²},g^{Î²_ll+Î²_rr+Î²_oo})$
- **ê°œì„ **
  Î² ë¶„ë¦¬ â†’ ìœ„ì¹˜ ê°„ ì—­ì‚° ì–´ë ¤ì›€
- âš ï¸ **ë‚¨ì€ ìœ„í—˜**
  Î² ì§€ìˆ˜ëŠ” CRSì— ë…¸ì¶œ â†’ ìƒìˆ˜í•­ë§Œ êµë¬˜íˆ ë°”ê¿” ìš°íšŒ ì—¬ì§€

### 4.9.3 Î³ Masking

- **êµ¬ì¡°**
  $e(g^{L},g^{Î²_lÎ³})\,e(g^{R},g^{Î²_rÎ³})\,e(g^{O},g^{Î²_oÎ³}) = e(g^{Z},g^{Î³})$
- **íš¨ê³¼**
  Î³ ë‚œë…í™”ë¡œ ê²°ê³¼ ìì²´ ì˜ˆì¸¡ ë¶ˆê°€ â†’ Non-Malleability ì™„ì„±
- ğŸš© **í•µì‹¬ Insight**
  **Î² ë¶„ë¦¬ + Î³ ë§ˆìŠ¤í‚¹** â‡’ ìœ„ì¹˜ ì¼ê´€ì„±ê³¼ ì¦ëª…ì ì¡°ì‘ ë¶ˆê°€ì„± ë™ì‹œ ë‹¬ì„±

### 4.9.4 Generator-based Î² Shift ìµœì í™”

> > **Î² shift íš¨ê³¼ë¥¼ ìƒì„±ê¸°(g)ì— ë‚´ì¬ì‹œí‚´ìœ¼ë¡œì¨ pairing ì—°ì‚°ì„ ì¤„ì´ë©´ì„œë„ ë¹„ê°€ì—­ì„±ì„ ìœ ì§€í•˜ëŠ” ìµœì í™” ê¸°ë²•**

- **êµ¬ì¡°**
  `g` ìƒì„±ê¸° ìì²´ë¥¼ operandë³„ë¡œ ë¬´ì‘ìœ„í™”í•˜ì—¬ **Î² íš¨ê³¼ë¥¼ ë‚´ì¬í™”**í•¨ìœ¼ë¡œì¨ pairing ìˆ˜ ì¤„ì´ê¸°:

```math
e(g_L Â· g_R Â· g_O,\ g^{Î²Î³}) = e(g_Z,\ g^Î³)
```

- ê°ê°ì˜ í”¼ì—°ì‚°ì operand ë§ˆë‹¤ ë‹¤ë¥¸ ìƒì„±ê¸° ì‚¬ìš©:

  ```math
  g_l = g^{Ï_l},\quad g_r = g^{Ï_r},\quad g_o = g^{Ï_o},\quad where\ Ï_o = Ï_l Â· Ï_r
  ```

- ì¦ëª… ì‹œ:

  ```math
  g_Z = âˆ_{i=1}^{n} (g_l^{Î²_l l_i(s)} Â· g_r^{Î²_r r_i(s)} Â· g_o^{Î²_o o_i(s)})^{v_i}
  ```

- ê²€ì¦ ì‹œ pairing ë‹¨ì¼í™”:

  ```math
  e(g_L Â· g_R Â· g_O, g^{Î²Î³}) = e(g_Z, g^Î³)
  ```

- **í•œê³„**

  - **pairing ì—°ì‚° ìˆ˜ ê°ì†Œ**: ê¸°ì¡´ 4ê°œ â†’ 1ê°œë¡œ ê°ì†Œ
  - **ê²€ì¦ í‚¤ ì‚¬ì´ì¦ˆ ì¶•ì†Œ**: Î² í•­ëª© 4ê°œ â†’ 2ê°œ (g^{Î²Î³}, g^Î³)
  - **ë³´ì•ˆì„± ìœ ì§€**: Î²â‚—, Î²áµ£, Î²â‚’ì˜ íš¨ê³¼ëŠ” ì—¬ì „íˆ í¬í•¨ë¨ (ë‹¨, ìƒì„±ê¸° ë‚´ì¬í™”ë¡œ ë…¸ì¶œ ì—†ìŒ)

- âš ï¸ **ë‚¨ì€ ìœ„í—˜**

  - ë‹¤í•­ì‹ì˜ **ìƒìˆ˜í•­ì´ 0ì´ ì•„ë‹ ê²½ìš°**, ì—¬ì „íˆ pairing ì¡°ì‘ íŒíŠ¸ê°€ ì¡´ì¬í•  ìˆ˜ ìˆìŒ

    > ex. $l(x) = 1, r(x) = 0, o(x) = 0$ì´ë©´ pairingì—ì„œ $g^{Î²_l}$ê°€ ì§ì ‘ ë…¸ì¶œë  ìˆ˜ ìˆìŒ

  - ë”°ë¼ì„œ **ìƒìˆ˜í•­ì´ 0ì´ ì•„ë‹Œ ë‹¤í•­ì‹ì€ ì œê±°** ë˜ëŠ” ë³„ë„ ì²˜ë¦¬ í•„ìš”

---

## ğŸ§® **Constraint Factor t(x) (`4.10`)**

- **R1CS â†’ QAP**
  $L(x)R(x)-O(x)=t(x)h(x)$
- **`t(x)`**
  Gate index ë‹¤í•­ì‹ â†’ íšŒë¡œ â€œë¼ˆëŒ€â€
- ğŸš© **í•µì‹¬ Insight**
  **LÂ·Râˆ’O**ê°€ `t(x)`ì˜ ë°°ìˆ˜ë©´ â€œëª¨ë“  Gate ì œì•½ ì¶©ì¡±â€ì„ í•œ ì¤„ë¡œ í‘œí˜„

---

## ğŸ”‘ **Public Inputs & One (`4.11`)**

### ì…ë ¥ ë¶„ë¦¬

| êµ¬ë¶„       | ë‹¤í•­ì‹                 | ì„¤ëª…                      |
| ---------- | ---------------------- | ------------------------- |
| Verifierìš© | $L_v(x),R_v(x),O_v(x)$ | ê²€ì¦ìê°€ ì§€ì • (ê³µê°œ ì…ë ¥) |
| Proverìš©   | $L_p(x),R_p(x),O_p(x)$ | ì¦ëª…ì witness            |

- **`vâ‚€ = 1`** : ìƒìˆ˜í•­ í‘œí˜„ â†’ `123 = 123Â·vâ‚€`
- **ê²€ì¦ì‹**

$$
e(g^{L_v+L_p},g^{R_v+R_p}) = e(g^{t},g^{h})\;e(g^{O_v+O_p},g)
$$

- ğŸš© **í•µì‹¬ Insight**
  ê³µê°œ ì…ë ¥ ê³ ì • â†’ ì¦ëª…ìê°€ ê±´ë“œë¦¬ë©´ pairing ì‹¤íŒ¨

---

## â• **Î” ë³´ì • & Pairing 1â†’1 (`4.12`)**

### WHY â€“ ë‚˜ëˆ—ì…ˆ ë¬¸ì œ

$$
Î”_0 = \frac{Î´_l LÂ·Î´_r R - Î´_o O}{t h} \;\;(\text{ë‚˜ëˆ—ì…ˆ ë¶ˆê°€})
$$

### HOW â€“ Î´ í•­ì— **t** ë¯¸ë¦¬ ê³±í•˜ê¸°

$$
\bigl(L+Î´_l t\bigr)\bigl(R+Î´_r t\bigr) - \bigl(O+Î´_o t\bigr)=t\bigl(h+Î”\bigr)
$$

$$
Î” = Î´_r L + Î´_l R + Î´_lÎ´_r t - Î´_o
$$

### ê²°ê³¼ â€“ **pairing ì••ì¶•**

$$
e\!\bigl(g^{L+Î´_lt},\,g^{R+Î´_rt}\bigr)=e\!\bigl(g^{t},\,g^{h+Î”}\bigr)
$$

- **ì—°ì‚° 3 â†’ 1** íšŒ
- ğŸš© **í•µì‹¬ Insight**
  Î´ë¥¼ `t`-ë°°ë¡œ ì„ ì–¸ â†’ ë¶„ëª¨ ì†Œê±° + ìš°ë³€ì— ë‹¨ì¼ `t` ë¬¶ìŒ

---

## ğŸš€ **ì „ì²´ zk-SNARK í”„ë¡œí† ì½œ (`4.13`)**

| ë‹¨ê³„          | ì„¤ëª…                                                     | í•µì‹¬ ë°ì´í„°                               |
| ------------- | -------------------------------------------------------- | ----------------------------------------- |
| **Setup**     | CRS ìƒì„± (s, Î±, Î², Î³, Î´)                                 | $g^{s^i},g^{Î± s^i},g^{Î² s^i},g^{t(s)}$    |
| **Prove**     | Witness â†’ $L,R,O,h,Î”$ ê³„ì‚°, ë§ˆìŠ¤í‚¹                       | $A=g^{L+Î´_lt},\;B=g^{R+Î´_rt},\;C=g^{h+Î”}$ |
| **Verify**    | ë‹¨ì¼ pairing í™•ì¸                                        | $e(A,B)=e(g^{t},C)$                       |
| **(ZK ì˜µì…˜)** | A,B,C ì— ì¶”ê°€ ë‚œìˆ˜ _r_A,r_B,r_C_ ê³±í•´ ì¶œë ¥ì„ ì™„ì „ ë‚œë…í™” | Zero-Knowledge ì™„ì„±                       |

- ğŸš© **í•µì‹¬ Insight**
  **A,B,C + ë‹¨ì¼ pairing** â‡’ Succinct & Non-Interactive
  Zero-Knowledge ë§ˆìŠ¤í‚¹ì€ _ì„ íƒì _ ìš”ì†Œ

---
