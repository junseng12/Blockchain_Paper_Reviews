# 📘 다항식 보간(Polynomial Interpolation) 핵심 개녕

$$
l(x) = a \cdot l_a(x) + b \cdot l_b(x) + \dots
$$

## 🎯 보간(Interpolation)의 필요성

- 우리는 **x = 1,2,3,... 특정 위치에서 "원하는 값"을 가지는 다항식**을 만들고 싶다.

  - ex. `l_a(x)`는 x=1,2에서 1이고, x=3에서 0
  - ex. `l_b(x)`는 x=2에서 -1, 나머지에서 0

→ 이런 다항식을 직접 만들려면 **Interpolation** 사용해야 함.

### QAP 구조에서 무엇을 하고 싶었는가?

- 왜 필요했나?

  - **각 연산(Operation)은 QAP에서 특정 x 위치로 인코딩됨** (ex: x=1에서 첫 연산, x=2에서 두 번째 연산...)
  - 각 위치에서 어떤 변수가 사용되었는지, 어떤 값으로 들어가는지를 **다항식으로 표현**해야 함.
  - 그러려면 → **해당 x 위치에서 원하는 값만 나오게 하는 다항식 필요**
    → → **Polynomial Interpolation 사용**

---

## 💡 다항식 보간법이란?

**주어진 점 (x_i, y_i)에 대해 → 해당 점을 정확히 통과하는 다항식 p(x)를 만드는 것.**

### 핵심 목표

- **주어진 점 집합 (x₁,y₁), (x₂,y₂), ..., (xₙ,yₙ)를 정확히 통과하는 다항식 p(x)를 찾는 것**

### 가장 기본적인 방법 → **Lagrange Interpolation**:

$$
L_i(x) = \prod_{j \ne i} \frac{x - x_j}{x_i - x_j}
$$

> > L_i(x)는 **x = x_i에서만 1**, 나머지 x_j에서는 0이 되는 다항식.

- 성질:

$$
L_i(x_j) = \begin{cases}
1 & \text{if } j = i \\
0 & \text{if } j \ne i
\end{cases}
$$

- 그러면 전체 다항식은:

$$
p(x) = \sum_{i=1}^n y_i \cdot L_i(x)
$$

### 직관

- L_i(x) = "i번째 위치에서만 1이고, 나머지 위치에서는 0"
- y_i는 "그 위치에서 원하는 값"

→ 그래서 p(x)는:

$$
p(x_j) = y_j
$$

**→ 정확히 원하는 보간 결과를 얻음!**

## ✅ 논문 내 QAP에서 다항식 보간법의 역할

- 우리가 QAP에서 만든:

$$
l(x) = a \cdot l_a(x) + b \cdot l_b(x) + \dots
$$

여기서:

- `l_a(x)` → **보간된 다항식**:

  - x=1,2에서 1, x=3에서 0 → 보간법 사용해서 구성

- `r_b(x)` → **보간된 다항식**:

  - x=2에서 -1, 나머지에서 0 → 보간법 사용해서 구성

**즉, 논문에서 우리가 "선택 다항식(Selection Polynomial)"이라고 부른 것들이 전부 Polynomial Interpolation의 결과물임!**

## 🧩 실제 숫자 예제

### 목표

- **x=1,2,3** → 총 3개의 위치
- 원하는 다항식 `l_a(x)`:

$$
l_a(1) = 1, \quad l_a(2) = 1, \quad l_a(3) = 0
$$

### 구성 과정

- 점 집합:

  - (1,1), (2,1), (3,0)

- L₁(x), L₂(x), L₃(x) 구성:

$$
L_1(x) = \frac{(x-2)(x-3)}{(1-2)(1-3)} = \frac{(x-2)(x-3)}{2}
$$

$$
L_2(x) = \frac{(x-1)(x-3)}{(2-1)(2-3)} = \frac{(x-1)(x-3)}{-1} = -(x-1)(x-3)
$$

$$
L_3(x) = \frac{(x-1)(x-2)}{(3-1)(3-2)} = \frac{(x-1)(x-2)}{2}
$$

- 이제:

$$
l_a(x) = 1 \cdot L_1(x) + 1 \cdot L_2(x) + 0 \cdot L_3(x)
$$

$$
l_a(x) = L_1(x) + L_2(x)
$$

- 실제로 이걸 전개하면:

$$
l_a(x) = \frac{(x-2)(x-3)}{2} - (x-1)(x-3)
$$

→ 계산해보면:

$$
l_a(1) = 1, \quad l_a(2) = 1, \quad l_a(3) = 0
$$

→ 원하는 결과 나옴!

---

### Q. 그러면 왜 4.8에서는 -1 같은 값도 나오는가?

- 위에서 만든 기본 L_i(x)는 0 또는 1만 주는 다항식.
- 하지만 **다항식 보간을 일반화**하면:

$$
p(x) = \sum_{i} y_i \cdot L_i(x)
$$

- 즉, L_i(x)는 기본 틀이고, **원하는 y_i 값(가중치)을 곱해주면 어떤 값도 표현 가능**.
- 그래서 -1, 3 등 원하는 값도 만들 수 있음.

#### 예시:

- `l_a(x) = L₁(x) + L₂(x)` → x=1,2에서 1, x=3에서 0
- `r_a(x) = -1·L₂(x)` → x=2에서 -1, 나머지에서 0

---

### ✅ 최종 요약 정리

| 항목                   | 설명                                                                                   |
| ---------------------- | -------------------------------------------------------------------------------------- |
| 다항식 보간법 목적     | 원하는 위치 x_i에서 원하는 값 y_i가 나오게 하는 다항식 구성                            |
| 논문에서 어떻게 사용?  | QAP에서 l_a(x), r_b(x), o_c(x) 같은 "선택 다항식"을 구성할 때 사용                     |
| 사용하는 방법 (기본)   | Lagrange Interpolation 사용 → L_i(x)를 조합해서 p(x) 구성                              |
| 원하는 값 어떻게 넣나? | p(x) = ∑ y_i · L_i(x) → 원하는 값 y_i를 그대로 넣으면 됨                               |
| 왜 -1도 가능한가?      | y_i에 원하는 값(1, -1, 3 등)을 넣으면 그 위치에서 그 값 나오게 만들 수 있음            |
| 예제                   | x=1,2,3에서 l_a(x)가 1,1,0 되게 하려면 → (1,1), (2,1), (3,0) 점을 보간 다항식으로 구성 |

---

## 결론

- 논문에서 우리가 l_a(x), r_b(x), o_c(x)를 만든 과정은 전부 → **다항식 보간법**으로 이루어진 것
- 처음엔 l_a(x)가 "선택/비선택" 개념(0/1)이었지만 → 보간법으로 y_i값을 자유롭게 넣을 수 있어서 -1, 3, ... 등 가능
